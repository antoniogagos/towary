{"remainingRequest":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/antoniogarciaabasolo/Desktop/apps/towary/src/components/BookOverlay.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/src/components/BookOverlay.vue","mtime":1571996239145},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgKiBhcyBBcGkgZnJvbSAnLi4vYXBpLmpzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQm9va092ZXJsYXknLAogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgY29tbWVudDogJycsCiAgICAgIGJvb2tDb21tZW50czogW10KICAgIH0KICB9LAogIG1vdW50ZWQ6IGFzeW5jIGZ1bmN0aW9uKCkgewogICAgdGhpcy5ib29rQ29tbWVudHMgPSBhd2FpdCBBcGkuZ2V0Qm9va0NvbW1lbnRzKHsgYm9vazogdGhpcy5zZWxlY3RlZEJvb2sgfSk7CiAgfSwKICBwcm9wczogewogICAgc2VsZWN0ZWRCb29rOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgdXNlcjogeyB0eXBlOiBPYmplY3QgfSwKICAgIHVzZXJGYXZCb29rczogeyB0eXBlOiBBcnJheSB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkNsaWNrQWRkQ29tbWVudDogYXN5bmMgZnVuY3Rpb24oY29tbWVudCkgewogICAgICBpZiAoY29tbWVudC5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgY29uc3QgeyBwaG90b1VSTCwgZGlzcGxheU5hbWUgfSA9IHRoaXMudXNlci5wcm92aWRlckRhdGFbMF07CiAgICAgIHRoaXMuY29tbWVudCA9ICcnOwogICAgICB0aGlzLmJvb2tDb21tZW50cy5wdXNoKHsKICAgICAgICBpZDogdGhpcy5zZWxlY3RlZEJvb2suc2x1ZywKICAgICAgICBwaWN0dXJlOiBwaG90b1VSTCwKICAgICAgICBuYW1lOiBkaXNwbGF5TmFtZSwKICAgICAgICB1c2VySWQ6IHRoaXMudXNlci51aWQsCiAgICAgICAgY29tbWVudAogICAgICB9KTsKICAgICAgYXdhaXQgQXBpLmFkZEJvb2tDb21tZW50KHtib29rOiB0aGlzLnNlbGVjdGVkQm9vaywgdXNlcjogdGhpcy51c2VyLCBjb21tZW50fSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgYWRkZWRUb0ZhdjogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMudXNlckZhdkJvb2tzLmZpbmQoYiA9PiBiLnNsdWcgPT09IHRoaXMuc2VsZWN0ZWRCb29rLnNsdWcpKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["BookOverlay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookOverlay.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"modal\">\n    <div class=\"modal-wrapper\">\n      <header>\n        <svg class=\"arrow-icon\" @click=\"$emit('close')\" fill=\"#184f82\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"></path></svg>\n        <div class=\"header-title\">{{ selectedBook.title }}</div>\n      </header>\n      <div class=\"container\">\n        <div class=\"book-info\">\n          <img class=\"book-cover\" :src=\"selectedBook.cover\"/>\n          <div class=\"book-details\">\n            <div class=\"book-title\">{{ selectedBook.title }}</div>\n            <div class=\"book-rating\">Rating: {{ selectedBook.rating}}</div>\n            <div class=\"book-synopsis\">{{selectedBook.synopsis}}</div>\n            <div class=\"book-footer\">\n              <div class=\"book-author\">Author: {{selectedBook.author}}</div>\n              <button @click=\"$emit('add-to-fav', selectedBook)\" :liked=\"addedToFav\" class=\"fav-btn\">\n                <div v-show=\"addedToFav\">\n                  <svg class=\"fav-icon\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 51.997 51.997\" width=\"14\" height=\"14\"><path d=\"M51.911 16.242c-.759-8.354-6.672-14.415-14.072-14.415-4.93 0-9.444 2.653-11.984 6.905-2.517-4.307-6.846-6.906-11.697-6.906C6.759 1.826.845 7.887.087 16.241c-.06.369-.306 2.311.442 5.478 1.078 4.568 3.568 8.723 7.199 12.013l18.115 16.439 18.426-16.438c3.631-3.291 6.121-7.445 7.199-12.014.748-3.166.502-5.108.443-5.477z\" data-original=\"#000000\" class=\"active-path\" data-old_color=\"#000000\" fill=\"#FFF\"/></svg>\n                  You like it\n                </div>\n                <div v-show=\"!addedToFav\">\n                  <svg class=\"fav-icon\" width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 471.701 471.701\"><path d=\"M433.601 67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7 13.6-92.4 38.3l-12.9 12.9-13.1-13.1c-24.7-24.7-57.6-38.4-92.5-38.4-34.8 0-67.6 13.6-92.2 38.2-24.7 24.7-38.3 57.5-38.2 92.4 0 34.9 13.7 67.6 38.4 92.3l187.8 187.8c2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-3.9l188.2-187.5c24.7-24.7 38.3-57.5 38.3-92.4.1-34.9-13.4-67.7-38.1-92.4zm-19.2 165.7l-178.7 178-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3s10.7-53.7 30.3-73.2c19.5-19.5 45.5-30.3 73.1-30.3 27.7 0 53.8 10.8 73.4 30.4l22.6 22.6c5.3 5.3 13.8 5.3 19.1 0l22.4-22.4c19.6-19.6 45.7-30.4 73.3-30.4 27.6 0 53.6 10.8 73.2 30.3 19.6 19.6 30.3 45.6 30.3 73.3.1 27.7-10.7 53.7-30.3 73.3z\"/></svg>\n                  Add to favorites\n                </div>\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"comment-section\">\n          <div class=\"comment-section--title\">Comments</div>\n          <div class=\"comment-list\">\n            <div class=\"comment\" v-for=\"(comment, index) in bookComments\" :key=\"index\">\n              <img width=\"45\" height=\"45\" class=\"comment-user-picture\" :src=\"comment.picture\"/>\n              <div class=\"comment-user-info\">\n                <div class=\"comment-username\">{{ comment.name }}</div>\n                <div class=\"comment-text\">{{ comment.comment }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <textarea placeholder=\"Add a comment...\" maxlength=\"200\" v-model=\"comment\"></textarea>\n        <div class=\"add-comment-btn\" @click=\"onClickAddComment(comment)\">Post comment</div>\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\n\n  import * as Api from '../api.js';\n\n  export default {\n    name: 'BookOverlay',\n    data: function() {\n      return {\n        comment: '',\n        bookComments: []\n      }\n    },\n    mounted: async function() {\n      this.bookComments = await Api.getBookComments({ book: this.selectedBook });\n    },\n    props: {\n      selectedBook: {\n        type: Object,\n        required: true,\n      },\n      user: { type: Object },\n      userFavBooks: { type: Array }\n    },\n    methods: {\n      onClickAddComment: async function(comment) {\n        if (comment.length === 0) return;\n        const { photoURL, displayName } = this.user.providerData[0];\n        this.comment = '';\n        this.bookComments.push({\n          id: this.selectedBook.slug,\n          picture: photoURL,\n          name: displayName,\n          userId: this.user.uid,\n          comment\n        });\n        await Api.addBookComment({book: this.selectedBook, user: this.user, comment});\n      }\n    },\n    computed: {\n      addedToFav: function() {\n        return Boolean(this.userFavBooks.find(b => b.slug === this.selectedBook.slug));\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n  header {\n    pointer-events: all;\n    color: #184f82;\n    background: #fff;\n    height: 60px;\n    font-size: 20px;\n  }\n\n  .book-info {\n    align-items: flex-start;\n    display: flex;\n  }\n\n  textarea {\n    font-size: 16px;\n    background: #ECEFF1;\n    border: none;\n    border-radius: 6px;\n    resize: none;\n    padding: 10px;\n    height: 100px;\n  }\n\n  textarea:focus {\n    outline: none;\n  }\n\n  .add-comment-btn {\n    width: 140px;\n    text-align: center;\n    padding: 8px 0;\n    margin-top: 10px;\n    background: #174f82;\n    color: #fffffff2;\n    border-radius: 4px;\n    box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.24);\n  }\n\n  .fav-btn {\n    cursor: pointer;\n    background: inherit;\n    border: 1px solid #BF360C;\n    border-radius: 4px;\n    padding: 4px 8px;\n    font-size: 16px;\n    color: #BF360C;\n    transition: all .1s ease;\n    width: 152px;\n  }\n\n  .fav-btn:focus {\n    outline: none;\n  }\n\n  .comment-section {\n    padding: 15px 0px;\n  }\n\n  .comment-section--title {\n    letter-spacing: 0.5px;\n    font-weight: 500;\n    color: #424242;\n    padding-bottom: 10px;\n    border-bottom: 2px solid #e5e5e5;\n    margin-bottom: 10px;\n  }\n\n  .comment {\n    display: flex;\n    align-items: flex-start;\n    padding-bottom: 15px;\n    margin-bottom: 15px;\n    border-bottom: 1px solid #f0f0f5;\n  }\n\n  .comment-list > .comment:last-child {\n    border-bottom: none;\n    margin-bottom: 0;\n  }\n\n  .comment-username {\n    font-weight: 500;\n  }\n\n  .comment-text {\n    color: #424242;\n  }\n\n  .comment-user-picture {\n    border-radius: 50%;\n  }\n\n  .comment-user-info {\n    display: flex;\n    flex-direction: column;\n    padding-left: 15px;\n  }\n\n  [liked] {\n    color: #ffffff;\n    background: #BF360C;\n  }\n\n  .fav-btn > div {\n    display: flex;\n    align-items: center;\n  }\n\n  .arrow-icon {\n    margin-right: 20px;\n    cursor: pointer;\n  }\n\n  .fav-icon {\n    padding-right: 5px;\n    fill: #BF360C;\n  }\n\n  .header-title {\n    flex: 1;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    width: 90%;\n  }\n\n  .book-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin: 15px 0;\n    color: #000000c7;\n    fill: #000000c7;\n  }\n\n  .book-details {\n    padding: 0 25px;\n  }\n\n  .container {\n    display: grid;\n    grid-template-rows: max-content 1fr max-content max-content;\n    margin: 10px 20px;\n    margin-top: 80px;\n    box-sizing: border-box;\n  }\n\n  @media only screen and (max-width: 700px) {\n    .book-info {\n      display: grid;\n      grid-template-rows: max-content 1fr;\n    }\n    .book-cover {\n      margin-bottom: 10px;\n    }\n    .book-details {\n      padding: 0;\n    }\n  }\n\n  .book-cover {\n    object-fit: contain;\n    width: 115px;\n    border-radius: 12px;\n    box-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.14);\n  }\n\n  .book-title {\n    font-size: 20px;\n    font-weight: bold;\n  }\n\n  .book-rating {\n    font-weight: 500;\n    font-size: 18px;\n    margin: 15px 0;\n  }\n\n  .book-author {\n    font-style: italic;\n  }\n\n  .modal-wrapper {\n    position: absolute;\n    z-index: 3;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    max-width: 1200px;\n    transition: opacity .3s ease;\n    background: #f7f7fa;\n    overflow: auto;\n  }\n\n  .modal-container {\n    width: 300px;\n    margin: 0px auto;\n    padding: 20px 30px;\n  }\n\n  .modal-enter {\n    opacity: 0;\n  }\n\n  .modal-leave-active {\n    opacity: 0;\n  }\n\n  .modal-enter .modal-container,\n  .modal-leave-active .modal-container {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1);\n  }\n</style>"]}]}