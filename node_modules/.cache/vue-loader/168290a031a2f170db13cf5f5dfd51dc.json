{"remainingRequest":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/antoniogarciaabasolo/Desktop/apps/towary/src/components/BookList.vue?vue&type=style&index=0&id=3d061052&scoped=true&lang=css&","dependencies":[{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/src/components/BookList.vue","mtime":1571993654934},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/antoniogarciaabasolo/Desktop/apps/towary/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubmF2aWdhdGlvbiB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBtYXJnaW46IDEwcHg7Cn0KCi5uYXYtYnRuIHsKICBjb2xvcjogIzE3NGY4MjsKICBib3JkZXI6IDFweCBzb2xpZCAjMTc0ZjgyOwogIHBhZGRpbmc6IDRweCAxMnB4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi5mb3J3YXJkIHsKICBtYXJnaW4tbGVmdDogYXV0bzsKfQoKLmJvb2stbGlzdCB7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBmbGV4OiAxIDEgMCU7CiAgbWluLWhlaWdodDogMTAwJTsKICBvdmVyZmxvdzogYXV0bzsKICBwYWRkaW5nOiA1cHggMTBweDsKfQoKLmJvb2sgewogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgYmFja2dyb3VuZDogcmdiKDI1NSwgMjU1LCAyNTUpOwogIGJvcmRlci1yYWRpdXM6IDhweDsKICBib3gtc2hhZG93OiByZ2JhKDAsIDAsIDAsIDAuMDQpIDBweCAwcHggMXB4IDBweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIHBhZGRpbmc6IDEwcHg7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDcwJSAzMCU7CiAgY3Vyc29yOiBwb2ludGVyOwogIG1hcmdpbjogMCAxMHB4IDZweCAxMHB4Owp9CgouYm9vazpmb2N1cyB7CiAgb3V0bGluZS1jb2xvcjogIzAzOUJFNTsKfQoKLmJvb2stY292ZXIgewogIHdpZHRoOiAyMHZ3OwogIG1heC1oZWlnaHQ6IDE3MHB4OwogIG1heC13aWR0aDogMTEzcHg7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGJveC1zaGFkb3c6IDAgMCAxcHggMCByZ2JhKDAsMCwwLDAuMTYpOwp9CgouYm9vay1hdXRob3IgewogIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLmJvb2staW5mbyB7CiAgcGFkZGluZy1sZWZ0OiAxMHB4Owp9CgouYm9vay10aXRsZSB7CiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBtYXgtd2lkdGg6IDkwJTsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwogIHBhZGRpbmc6IDAgNXB4OwogIGZsZXg6IDE7Cn0KCi5zZXBhcmF0b3IgewogIG1hcmdpbjogMCA1cHg7Cn0KCi5ib29rLWZvb3RlciB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKfQoKLmJvb2stc3lub3BzaXMgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7CiAgLXdlYmtpdC1saW5lLWNsYW1wOiAzOwogIG92ZXJmbG93OiBoaWRkZW47CiAgbWFyZ2luOiAyMHB4IDA7CiAgZm9udC1zaXplOiAxNHB4Owp9CgouYm9vay10aXRsZSwgLmJvb2stcG9zaXRpb24gewogIGNvbG9yOiAjMTg0ZjgyOwogIGZvbnQtd2VpZ2h0OiA1MDA7CiAgZm9udC1zaXplOiAyMHB4Owp9CgouYm9vay1oZWFkZXItaW5mbyB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouYm9vay11cHZvdGUtYnRuIHsKICBjb2xvcjogIzYzNjM2MzsKICBmaWxsOiAjOTA5MDkwOwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBiYWNrZ3JvdW5kOiBub25lOwogIGJvcmRlcjogbm9uZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgd2lkdGg6IDcwcHg7CiAgaGVpZ2h0OiAyNHB4OwogIHBhZGRpbmc6IDA7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7Cn0KCi5ib29rLXVwdm90ZS1idG46Zm9jdXMgewogIG91dGxpbmUtY29sb3I6ICMwMzlCRTU7Cn0KCi5ib29rLXVwdm90ZXMtbnVtYmVyIHsKICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICB3aGl0ZS1zcGFjZTogbm93cmFwOwogIG92ZXJmbG93OiBoaWRkZW47CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBtYXJnaW4tbGVmdDogNXB4OwogIGZvbnQtc2l6ZTogMTRweDsKfQoKLmJvb2stY292ZXItY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgpbbGlrZWRdIHsKICB0cmFuc2l0aW9uOiBhbGwgLjFzIGVhc2U7CiAgYmFja2dyb3VuZDogI0JGMzYwQzsKICBmaWxsOiAjZmZmZmZmOwogIGNvbG9yOiAjZmZmZmZmOwogIGJvcmRlci1yYWRpdXM6IDRweDsKfQoKLnNwaW5uZXIgewogIHdpZHRoOiA0MHB4OwogIGhlaWdodDogNDBweDsKICBtYXJnaW46IDEwMHB4IGF1dG87CiAgYmFja2dyb3VuZC1jb2xvcjogIzMzMzsKCiAgYm9yZGVyLXJhZGl1czogMTAwJTsgIAogIC13ZWJraXQtYW5pbWF0aW9uOiBzay1zY2FsZW91dCAxLjBzIGluZmluaXRlIGVhc2UtaW4tb3V0OwogIGFuaW1hdGlvbjogc2stc2NhbGVvdXQgMS4wcyBpbmZpbml0ZSBlYXNlLWluLW91dDsKfQoKQC13ZWJraXQta2V5ZnJhbWVzIHNrLXNjYWxlb3V0IHsKICAwJSB7IC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKSB9CiAgMTAwJSB7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS4wKTsKICAgIG9wYWNpdHk6IDA7CiAgfQp9CgpAa2V5ZnJhbWVzIHNrLXNjYWxlb3V0IHsKICAwJSB7IAogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApOwogICAgdHJhbnNmb3JtOiBzY2FsZSgwKTsKICB9IDEwMCUgewogICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEuMCk7CiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMCk7CiAgICBvcGFjaXR5OiAwOwogIH0KfQoK"},{"version":3,"sources":["BookList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuHA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookList.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div\n        @click=\"$emit('open-book-overlay', book)\"\n        @keyup.enter=\"$emit('open-book-overlay', book)\"\n        class=\"book\"\n        v-for=\"(book, index) in showingBooks\"\n        :key=\"index\"\n        tabindex=\"0\">\n      <div class=\"book-info\">\n        <div class=\"book-header-info\">\n          <div class=\"book-position\">{{ computeBookPos(book.slug) }}. </div>\n          <div class=\"book-title\">{{ book.title }}</div>\n          <div class=\"book-rating\"> {{ book.rating }}/10 </div>\n        </div>\n        <div class=\"book-synopsis\">{{ book.synopsis }}</div>\n        <div class=\"book-footer\">\n          <div class=\"book-author\">{{ book.author }}</div>\n          <button :key=\"book.slug\" :liked=\"computeUserLikeBook(book, userLikedBooks)\" @click=\"onClickUpvote(book, $event)\" class=\"book-upvote-btn\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"><g><path d=\"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z\" class=\"style-scope yt-icon\"></path></g></svg>\n            <div class=\"book-upvotes-number\">{{ book.upvotes }}</div>\n          </button>\n        </div>\n      </div>\n      <div class=\"book-cover-container\">\n        <img :src=\"book.cover\" class=\"book-cover\"/>\n      </div>\n    </div>\n    <div v-show=\"!this.searchInput.length > 0\" class=\"navigation\">\n      <div class=\"nav-btn prev\" v-show=\"page > 0\" @click=\"page -= 1\">Previous page</div>\n      <div class=\"nav-btn forward\" v-show=\"books.length > booksPerPage * (page + 1)\" @click=\"page += 1\">Next page</div>\n    </div>\n    <div class=\"spinner\" v-if=\"loading\"></div>\n  </div>\n</template>\n\n<script>\n\n  import * as Api from '../api.js';\n\n  export default {\n    name: 'BookList',\n    data: function() {\n      return {\n        books: [],\n        filteredBooks: [],\n        booksPerPage: 5,\n        page: 0,\n        userLikedBooks: [],\n        loading: true,\n      }\n    },\n    props: {\n      user: { type: Object },\n      userFavBooks: { type: Array },\n      searchInput: { type: String },\n    },\n    computed: {\n      paginatedBooks: function() {\n        if (this.books) {\n          const start = (this.page * this.booksPerPage);\n          this.page > 0 ? start - 1 : '';\n          const end = (this.page * this.booksPerPage + this.booksPerPage);\n          return this.books.slice(start, end);\n        }\n      },\n      showingBooks: function() {\n        return this.searchInput.length > 0 ? this.filteredBooks : this.paginatedBooks;\n      }\n    },\n    watch: {\n      searchInput: function(searchInput) {\n        this.$nextTick(_ => {\n          const booksMatched = new Set();\n          for (let book of this.books) {\n            if (book.title.toLowerCase().match(searchInput.toLowerCase()))Â {\n              booksMatched.add(book);\n            }\n            if (book.synopsis.toLowerCase().match(searchInput.toLowerCase())) {\n              booksMatched.add(book);\n            }\n          }\n         this.filteredBooks = [...booksMatched];\n        });\n      }\n    },\n    mounted: function () {\n      if (this.books.length > 0) return;\n      this.$nextTick(async function() {\n        const req = await fetch('http://localhost:3000/books');\n        const resp = await req.json();\n        this.books = resp.books;\n        this.loading = false;\n      });\n    },\n    methods: {\n      onClickUpvote: async function(book, evt) {\n        evt.stopPropagation();\n        const target = evt.currentTarget;\n        const matched = this.userFavBooks.find(b => b.slug === book.slug);\n        this.$emit('add-to-fav', book);\n        if (Boolean(matched)) {\n          requestAnimationFrame(_ => target.removeAttribute('liked', \"true\"));\n        } else {\n          requestAnimationFrame(_ => target.setAttribute('liked', \"true\"));\n        }\n      },\n      computeUserLikeBook: function(book) {\n       return Boolean(this.userFavBooks.find(b => b.slug === book.slug));\n      },\n      computeBookPos(slug) {\n        return this.books.findIndex(b => b.slug === slug) + 1;\n      },\n    }\n  }\n</script>\n\n<style scoped>\n\n  .navigation {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 10px;\n  }\n\n  .nav-btn {\n    color: #174f82;\n    border: 1px solid #174f82;\n    padding: 4px 12px;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n\n  .forward {\n    margin-left: auto;\n  }\n\n  .book-list {\n    box-sizing: border-box;\n    flex: 1 1 0%;\n    min-height: 100%;\n    overflow: auto;\n    padding: 5px 10px;\n  }\n\n  .book {\n    align-items: center;\n    background: rgb(255, 255, 255);\n    border-radius: 8px;\n    box-shadow: rgba(0, 0, 0, 0.04) 0px 0px 1px 0px;\n    box-sizing: border-box;\n    padding: 10px;\n    display: grid;\n    grid-template-columns: 70% 30%;\n    cursor: pointer;\n    margin: 0 10px 6px 10px;\n  }\n\n  .book:focus {\n    outline-color: #039BE5;\n  }\n\n  .book-cover {\n    width: 20vw;\n    max-height: 170px;\n    max-width: 113px;\n    border-radius: 8px;\n    box-shadow: 0 0 1px 0 rgba(0,0,0,0.16);\n  }\n\n  .book-author {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n\n  .book-info {\n    padding-left: 10px;\n  }\n\n  .book-title {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    max-width: 90%;\n    white-space: nowrap;\n    padding: 0 5px;\n    flex: 1;\n  }\n\n  .separator {\n    margin: 0 5px;\n  }\n\n  .book-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n  }\n\n  .book-synopsis {\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 3;\n    overflow: hidden;\n    margin: 20px 0;\n    font-size: 14px;\n  }\n\n  .book-title, .book-position {\n    color: #184f82;\n    font-weight: 500;\n    font-size: 20px;\n  }\n\n  .book-header-info {\n    display: flex;\n    align-items: center;\n  }\n\n  .book-upvote-btn {\n    color: #636363;\n    fill: #909090;\n    display: flex;\n    align-items: center;\n    background: none;\n    border: none;\n    cursor: pointer;\n    width: 70px;\n    height: 24px;\n    padding: 0;\n    justify-content: center;\n  }\n\n  .book-upvote-btn:focus {\n    outline-color: #039BE5;\n  }\n\n  .book-upvotes-number {\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n    font-weight: 500;\n    margin-left: 5px;\n    font-size: 14px;\n  }\n\n  .book-cover-container {\n    display: flex;\n    justify-content: center;\n  }\n\n  [liked] {\n    transition: all .1s ease;\n    background: #BF360C;\n    fill: #ffffff;\n    color: #ffffff;\n    border-radius: 4px;\n  }\n\n  .spinner {\n    width: 40px;\n    height: 40px;\n    margin: 100px auto;\n    background-color: #333;\n\n    border-radius: 100%;  \n    -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;\n    animation: sk-scaleout 1.0s infinite ease-in-out;\n  }\n\n  @-webkit-keyframes sk-scaleout {\n    0% { -webkit-transform: scale(0) }\n    100% {\n      -webkit-transform: scale(1.0);\n      opacity: 0;\n    }\n  }\n\n  @keyframes sk-scaleout {\n    0% { \n      -webkit-transform: scale(0);\n      transform: scale(0);\n    } 100% {\n      -webkit-transform: scale(1.0);\n      transform: scale(1.0);\n      opacity: 0;\n    }\n  }\n \n</style>\n"]}]}