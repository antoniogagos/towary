<template>
  <div class="container">
    <div v-if="userFavBooks.length === 0" class="empty-state">
      <svg width="25" height="25" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M167.119 91.925L49.156 10.915C37.405 2.74 21.655 12.928 24.292 26.998l34.72 186.242c18.153-53.577 57.501-97.357 108.107-121.315z" fill="#ffd164"/><path d="M137.294 71.443a234.154 234.154 0 00-18.941 12.065c-5.479 3.865-12.718 4.113-18.245.317L75.094 66.647c-5.182-3.605-12.128.888-10.965 7.093l7.638 40.971c1.136 6.093-.572 12.299-4.417 17.16-6.747 8.533-12.952 17.513-18.483 26.947l10.145 54.421c18.153-53.577 57.501-97.357 108.107-121.315l-29.825-20.481z" fill="#ffc350"/><path d="M344.88 91.925l117.963-81.011c11.751-8.174 27.501 2.014 24.863 16.083L452.988 213.24c-18.154-53.577-57.502-97.357-108.108-121.315z" fill="#ffd164"/><path d="M374.705 71.443a234.154 234.154 0 0118.941 12.065c5.479 3.865 12.718 4.113 18.245.317l25.014-17.178c5.182-3.605 12.128.888 10.965 7.093l-7.638 40.971c-1.136 6.093.572 12.299 4.417 17.16 6.747 8.533 12.952 17.513 18.483 26.947l-10.145 54.421c-18.153-53.577-57.501-97.357-108.107-121.315l29.825-20.481z" fill="#ffc350"/><circle cx="256" cy="280" r="224" fill="#ffe17d"/><path d="M288.516 471.483c-123.712 0-224-100.288-224-224 0-53.573 18.831-102.734 50.204-141.28C64.255 147.276 32 209.861 32 280c0 123.711 100.288 224 224 224 70.139 0 132.725-32.256 173.797-82.721-38.546 31.372-87.707 50.204-141.281 50.204z" fill="#ffd164"/><path d="M278.919 272H233.08c-6.783 0-10.488 7.911-6.146 13.121l22.92 27.504c3.198 3.838 9.093 3.838 12.292 0l22.92-27.504c4.341-5.21.636-13.121-6.147-13.121z" fill="#9c6846"/><g fill="#aa7346"><path d="M184 304H8c-4.422 0-8-3.578-8-8s3.578-8 8-8h176c4.422 0 8 3.578 8 8s-3.578 8-8 8zM7.992 360c-3.867 0-7.273-2.812-7.891-6.75a7.99 7.99 0 016.648-9.148l152-24c4.344-.711 8.469 2.289 9.148 6.648a7.99 7.99 0 01-6.648 9.148l-152 24c-.421.07-.843.102-1.257.102zM503.999 304H328c-4.422 0-8-3.578-8-8s3.578-8 8-8h176c4.422 0 8 3.578 8 8s-3.579 8-8.001 8zM504.007 360c-.414 0-.836-.031-1.258-.102l-152-24c-4.359-.688-7.344-4.781-6.648-9.148.688-4.359 4.789-7.352 9.148-6.648l152 24c4.359.688 7.344 4.781 6.648 9.148-.616 3.937-4.023 6.75-7.89 6.75z"/></g><path d="M256 292c-12.018 0-22.899-4.83-30.84-12.64-.17 1.959.315 4.009 1.775 5.761l22.919 27.503c3.199 3.838 9.093 3.838 12.292 0l22.919-27.503c1.46-1.752 1.945-3.802 1.775-5.761C278.899 287.17 268.017 292 256 292z" fill="#7d5046"/><path d="M256 352c-34.154 0-63.02 23.2-72.799 55.18-.847 2.77 1.52 5.428 4.267 4.818 21.205-4.708 44.318-7.312 68.532-7.312h-.057c24.214 0 47.327 2.604 68.532 7.312 2.747.61 5.114-2.048 4.267-4.818-9.779-31.98-38.645-55.18-72.799-55.18" fill="#9c6846"/><g fill="#aa7346"><path d="M112.039 201.992a9.977 9.977 0 01-7.562-3.445c-3.609-4.172-3.172-10.477.992-14.094 1.406-1.227 35-30.062 84.172-42.164 5.383-1.312 10.781 1.961 12.102 7.32 1.32 5.367-1.961 10.781-7.32 12.102-44.305 10.906-75.531 37.578-75.844 37.844a9.942 9.942 0 01-6.54 2.437zM399.961 201.992a9.934 9.934 0 01-6.539-2.438c-.312-.266-31.539-26.937-75.844-37.844-5.359-1.32-8.641-6.734-7.32-12.102 1.32-5.359 6.727-8.633 12.102-7.32 49.172 12.102 82.766 40.937 84.172 42.164 4.164 3.617 4.602 9.922.992 14.094a9.981 9.981 0 01-7.563 3.446z"/></g><path d="M172 260c-11.046 0-20-8.954-20-20v-16c0-11.046 8.954-20 20-20s20 8.954 20 20v16c0 11.045-8.954 20-20 20z" fill="#7d5046"/><path d="M172 204c-1.37 0-2.707.141-4 .403V232c0 6.627 5.373 12 12 12s12-5.373 12-12v-8c0-11.046-8.954-20-20-20z" fill="#9c6846"/><path d="M340 260c-11.046 0-20-8.954-20-20v-16c0-11.046 8.954-20 20-20s20 8.954 20 20v16c0 11.045-8.955 20-20 20z" fill="#7d5046"/><path d="M340 204c-1.37 0-2.707.141-4 .403V232c0 6.627 5.373 12 12 12s12-5.373 12-12v-8c0-11.046-8.954-20-20-20z" fill="#9c6846"/><g fill="#7d5046"><path d="M255.943 352l.029.001L256 352h-.057zM194.338 384.481c18.445-7.16 39.394-11.223 61.633-11.229l-.05-.001h.101l-.05.001c22.239.006 43.189 4.069 61.635 11.23-13.875-19.669-36.288-32.471-61.634-32.48-25.348.008-47.76 12.81-61.635 32.479z"/></g><path d="M176 448c26.51 0 48-21.49 48-48 0-39.567-32.616-90.006-44.076-106.508-1.902-2.738-5.947-2.738-7.848 0C160.615 309.994 128 360.433 128 400c0 26.509 21.49 48 48 48z" fill="#a5cdff"/><path d="M150.628 408.719c0-29.068 17.595-77.965 31.482-112.034a336.552 336.552 0 00-2.186-3.192c-1.902-2.739-5.947-2.739-7.848 0-11.46 16.5-44.076 66.939-44.076 106.506 0 24.62 18.607 44.677 42.485 47.444-11.984-8.726-19.857-22.765-19.857-38.724z" fill="#8cb4eb"/></svg>
      You don't like any book!
    </div>
    <div v-if="userFavBooks.length > 0" class="wrapper">
      <div class="header">
        <div>Title</div>
        <div>Author</div>
        <div>Rating</div>
        <div>Added</div>
      </div>
      <div class="list">
        <div class="book" v-for="book in userFavBooks" :key="book.slug">
          <div>{{ book.title }}</div>
          <div class="book-author">{{ book.author }}</div>
          <div>{{ book.rating }}</div>
          <div>{{ computeAddedTime(book.added) }} </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>

import * as Api from '../api.js';

export default {
  name: 'app',
  props: {
    user: {
      type: Object,
    },
    userFavBooks: {
      type: Array,
      required: true
    }
  },
  methods: {
    computeAddedTime: function(added) {
      const formatted = added.toMillis ? added.toMillis() : added;
      return new Intl.DateTimeFormat('en-US', { dateStyle: 'short'}).format(formatted);
    }
  }
}

</script>

<style scoped>

.container {
  padding-top: 48px;
}

.empty-state {
  display: flex;
  background: #fee17d;
  align-items: center;
  width: 100%;
  padding: 10px;
  justify-content: center;
  color: #00000069;
  box-sizing: border-box;
}

.empty-state > svg {
  padding-right: 5px;
}

.header {
  display: grid;
  grid-template-columns: 2fr 1.5fr 1fr 1fr;
  grid-gap: 5px;
  padding: 10px;
  background: #ffffff;
  font-weight: 500;
  color: #184f82;
  box-shadow: 0px 1px 1px 0 rgba(0, 0, 0, 0.14);
}

.book-author {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.list > .book:last-child {
  border-bottom: none;
}

.book {
  display: grid;
  grid-gap: 5px;
  grid-template-columns: 2fr 1.5fr 1fr 1fr;
  padding: 10px 10px;
  border-bottom: 1px solid #e3e7ea;
  color: #000000cc;
}

</style>
